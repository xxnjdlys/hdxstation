(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"377":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var o,r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=_interopRequireDefault(n(0)),l=n(5),u=_interopRequireDefault(l),s=n(113),p=n(114),f=_interopRequireDefault(n(442)),h=_interopRequireDefault(n(445)),m=n(73),d=n(115),_=_interopRequireDefault(n(448));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(452),t.default=(0,p.connect)(function(e){var t=e.home,n=e.loading;return i({},t,n)})(o=(0,_.default)()(o=function(e){function Home(){var e,t,n,o=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Home);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=n=_possibleConstructorReturn(this,(e=Home.__proto__||Object.getPrototypeOf(Home)).call.apply(e,[this].concat(a))),n.componentDidMount=function(){n.showLoadingIfNeeded(),n.props.dispatch({"type":d.ACTION_HOME})},n.config={"navigationBarTitleText":"主页"},n.showLoadingIfNeeded=function(){var e=n.props,t=e.banner,o=e.category,r=e.recommend;(t.length<=0||o.length<=0||r.length<=0)&&((0,l.hideTabBar)(),(0,l.showLoading)({"title":"loading"}).then(function(e){m.Lg.d(e)}))},n.handleOnSearch=function(){m.Lg.e("on search bar click... "),u.default.navigateTo({"url":"/pages/search/index"})},n.handleLogin=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var a=t[o](r),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function _callee(){var e;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(0,l.showLoading)({"title":"登录中"}).then(function(e){m.Lg.d(e)}),t.next=4,(0,l.login)();case 4:return t.next=6,(0,l.getUserInfo)({"lang":"zh_CN"});case 6:e=t.sent,m.Lg.e(e.userInfo),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),m.Lg.d("on catch invoke");case 13:return t.prev=13,m.Lg.d("on finally invoke"),t.finish(13);case 16:case"end":return t.stop()}},_callee,o,[[0,10,13,16]])})),n.handleCategoryClick=function(e){m.Lg.e("handleCategoryClick : "+e.name)},n.handleRecommend=function(e){m.Lg.e("handleRecommend : "+e.name)},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Home,u.default.Component),r(Home,[{"key":"onReachBottom","value":function onReachBottom(){this.props.dispatch({"type":"home/save","payload":{"page":this.props.page+1}})}},{"key":"render","value":function render(){var e=this,t=this.props,n=t.banner,o=t.category,r=t.recommend,a=t.hot;return c.default.createElement(s.View,{"className":"home-page"},n.length>0?c.default.createElement(s.View,{"className":"home-page"},c.default.createElement(s.View,{"className":"banner-content"},c.default.createElement(f.default,{"banner":n})),c.default.createElement(s.View,{"className":"margin-category-root"},o.length>0?c.default.createElement(s.View,{"className":"at-row at-row--wrap"},o.map(function(t,n){return c.default.createElement(s.View,{"className":"at-col-row","key":n,"onClick":e.handleCategoryClick.bind(e,t)},c.default.createElement(s.View,{"key":n,"className":"margin-category"},c.default.createElement(s.Image,{"className":"at-col-row__img-row","mode":"widthFix","src":t.icon})),c.default.createElement(s.Text,{"className":"item-text-list"},t.title))})):c.default.createElement(s.View,null)),c.default.createElement(s.View,{"className":"home-hot-content"},c.default.createElement(h.default,{"hot":a})),c.default.createElement(s.View,{"className":"holder-8px"}),c.default.createElement(s.View,{"className":"at-row at-row--wrap"},c.default.createElement(s.View,null,c.default.createElement(s.Text,{"className":"home-recmd-header"},"本周推荐")),r.length>0?r.map(function(t,n){return c.default.createElement(s.View,{"key":n,"className":"at-col-12 at-col--auto home-margin-recmd","onClick":e.handleRecommend.bind(e,t)},c.default.createElement(s.View,{"className":"at-row"},c.default.createElement(s.View,{"className":"at-col-5"},c.default.createElement(s.Image,{"className":"home-recmd-img","mode":"widthFix","src":t.cover})),c.default.createElement(s.View,{"className":"at-col-7"},c.default.createElement(s.View,{"className":"at-row home-info-abs-top"},c.default.createElement(s.Text,{"className":"home-recmd-title"},"步步高点读机哪里不会点哪里.",t.name)),c.default.createElement(s.View,{"className":"at-row at-row__align--end home-info-abs-bottom"},c.default.createElement(s.Text,{"className":"at-col at-col-9 home-recmd-desc"},t.name),c.default.createElement(s.Image,{"className":"at-col at-col-2 home-recmd-btn","src":t.corner})))))}):c.default.createElement(s.View,null)),c.default.createElement(s.View,{"className":"holder-12px"}),c.default.createElement(s.Text,{"className":"text-align-center text-size-18"}," Copy Right HongDouXiong Studio"),c.default.createElement(s.View,{"className":"holder-12px"})):c.default.createElement(s.View,null))}},{"key":"componentDidMount","value":function componentDidMount(){a(Home.prototype.__proto__||Object.getPrototypeOf(Home.prototype),"componentDidMount",this)&&a(Home.prototype.__proto__||Object.getPrototypeOf(Home.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){a(Home.prototype.__proto__||Object.getPrototypeOf(Home.prototype),"componentDidShow",this)&&a(Home.prototype.__proto__||Object.getPrototypeOf(Home.prototype),"componentDidShow",this).call(this),this._offReachBottom=(0,l.onReachBottom)({"callback":this.onReachBottom,"ctx":this,"onReachBottomDistance":void 0})}},{"key":"componentDidHide","value":function componentDidHide(){a(Home.prototype.__proto__||Object.getPrototypeOf(Home.prototype),"componentDidHide",this)&&a(Home.prototype.__proto__||Object.getPrototypeOf(Home.prototype),"componentDidHide",this).call(this),this._offReachBottom&&this._offReachBottom()}}]),Home}())||o)||o},"386":function(e,t,n){"use strict";e.exports=n(404)()},"404":function(e,t,n){"use strict";var o=n(405);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,e.exports=function(){function shim(e,t,n,r,a,i){if(i!==o){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function getShim(){return shim}shim.isRequired=shim;var e={"array":shim,"bool":shim,"func":shim,"number":shim,"object":shim,"string":shim,"symbol":shim,"any":shim,"arrayOf":getShim,"element":shim,"elementType":shim,"instanceOf":getShim,"node":shim,"objectOf":getShim,"oneOf":getShim,"oneOfType":getShim,"shape":getShim,"exact":getShim,"checkPropTypes":emptyFunctionWithReset,"resetWarningCache":emptyFunction};return e.PropTypes=e,e}},"405":function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"442":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0}),t.default=void 0;var o,r,a=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=_interopRequireDefault(n(0)),c=_interopRequireDefault(n(5)),l=n(113),u=_interopRequireDefault(n(386));n(443);var s=n(73);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=(r=o=function(e){function WKSwiper(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WKSwiper);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=n=_possibleConstructorReturn(this,(e=WKSwiper.__proto__||Object.getPrototypeOf(WKSwiper)).call.apply(e,[this].concat(r))),n.handleClick=function(e,t){s.Lg.e("swiper item click: "+e+" , "+t);var n=e.router;c.default.navigateTo({"url":n})},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(WKSwiper,c.default.Component),a(WKSwiper,[{"key":"render","value":function render(){var e=this,t=this.props.banner;return i.default.createElement(l.View,{"className":"home-page"},Array.isArray(t)&&t.length>0?i.default.createElement(l.Swiper,{"className":"swiper","circular":!0,"indicatorDots":!0,"indicatorColor":"#666","interval":"5000","indicatorActiveColor":"#fff","preMargin":"20","autoplay":!0},t.map(function(t,n){return i.default.createElement(l.SwiperItem,{"key":n},i.default.createElement(l.Image,{"onClick":e.handleClick.bind(e,t,n),"className":"swiper_img-item","mode":"scaleToFill","src":t.cover}))})):i.default.createElement(l.View,null))}}]),WKSwiper}(),o.propTypes={"banner":u.default.array},o.defaultProps={"banner":[]},r);t.default=p},"443":function(e,t,n){},"445":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0}),t.default=void 0;var o,r,a=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=_interopRequireDefault(n(0)),c=_interopRequireDefault(n(5)),l=n(113),u=_interopRequireDefault(n(386));n(446);var s=n(73);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=(r=o=function(e){function WKHot(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WKHot);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=n=_possibleConstructorReturn(this,(e=WKHot.__proto__||Object.getPrototypeOf(WKHot)).call.apply(e,[this].concat(r))),n.handleClick=function(e){s.Lg.e("hot item click: "+e);var t=e.router;c.default.navigateTo({"url":t})},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(WKHot,c.default.Component),a(WKHot,[{"key":"render","value":function render(){var e=this.props.hot;return i.default.createElement(l.View,{"className":"hot-page"},Array.isArray(e)&&e.length>=4?i.default.createElement(l.View,{"className":"margin-hot-root"},i.default.createElement(l.View,{"className":"at-row"},i.default.createElement(l.View,{"className":"at-col at-col-7"},i.default.createElement(l.View,{"className":"at-row","onClick":this.handleClick.bind(this,e[0])},i.default.createElement(l.Image,{"className":"hot-img-left","mode":"widthFix","src":e[0].cover})),i.default.createElement(l.View,{"className":"holder-8px"}),i.default.createElement(l.View,{"className":"at-row","onClick":this.handleClick.bind(this,e[1])},i.default.createElement(l.Image,{"className":"hot-img-left","mode":"widthFix","src":e[1].cover})),i.default.createElement(l.View,{"className":"holder-8px"}),i.default.createElement(l.View,{"className":"at-row","onClick":this.handleClick.bind(this,e[2])},i.default.createElement(l.Image,{"className":"hot-img-left","mode":"widthFix","src":e[2].cover}))),i.default.createElement(l.View,{"className":"at-col at-col-5","onClick":this.handleClick.bind(this,e[3])},i.default.createElement(l.Image,{"className":"hot-img-right","mode":"widthFix","src":e[3].cover})))):i.default.createElement(l.View,null))}}]),WKHot}(),o.propTypes={"hot":u.default.array},o.defaultProps={"hot":[]},r);t.default=p},"446":function(e,t,n){},"448":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=n(5),i=(_interopRequireDefault(a),_interopRequireDefault(n(449))),c=n(73);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}t.default=function pageInit(){return function Component(Component){return function(e){function _TaroComponentClass(e){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_TaroComponentClass),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(_TaroComponentClass.__proto__||Object.getPrototypeOf(_TaroComponentClass)).call(this,e))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(_TaroComponentClass,Component),o(_TaroComponentClass,[{"key":"componentWillMount","value":function componentWillMount(){!function initShareMenu(e){e&&e.canShare?(0,a.showShareMenu)({"withShareTicket":!1}):(0,a.hideShareMenu)()}(this.state)}},{"key":"componentDidMount","value":(t=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var a=t[o](r),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function _callee(){var e;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.default.appCheckAuth();case 2:e=t.sent,c.Lg.e("授权成功"),e?r(_TaroComponentClass.prototype.__proto__||Object.getPrototypeOf(_TaroComponentClass.prototype),"componentDidMount",this)&&r(_TaroComponentClass.prototype.__proto__||Object.getPrototypeOf(_TaroComponentClass.prototype),"componentDidMount",this).call(this):(0,a.showToast)({"title":"授权失败","icon":"none","mask":!0});case 5:case"end":return t.stop()}},_callee,this)})),function componentDidMount(){return t.apply(this,arguments)})},{"key":"onShareAppMessage","value":function onShareAppMessage(){var e=r(_TaroComponentClass.prototype.__proto__||Object.getPrototypeOf(_TaroComponentClass.prototype),"onShareAppMessage",this).call(this);return e||{"title":"默认分享内容"}}},{"key":"onPullDownRefresh","value":function onPullDownRefresh(){r(_TaroComponentClass.prototype.__proto__||Object.getPrototypeOf(_TaroComponentClass.prototype),"onPullDownRefresh",this)&&(r(_TaroComponentClass.prototype.__proto__||Object.getPrototypeOf(_TaroComponentClass.prototype),"onPullDownRefresh",this).call(this),setTimeout(function(){(0,a.stopPullDownRefresh)()},1500))}}]),_TaroComponentClass;var t}()}}},"449":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0}),t.default=void 0;var o,r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=(o=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e,t,n;return regeneratorRuntime.wrap(function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:return e=c.default.$store.getState(),o.next=3,(0,i.login)();case 3:return t=o.sent,o.next=6,(0,i.request)({"url":e.app.baseURL+"xxx/xxx/xxx","data":{"code":t.code},"method":"POST"});case 6:if(!(n=o.sent).data.data||!n.data.data.authorize){o.next=13;break}return saveAuthToken(n.data.data.authorize),o.abrupt("return",!0);case 13:return u.Lg.e("获取token失败"),o.abrupt("return",!1);case 15:case"end":return o.stop()}},_callee3,this)})),function getAuthToken(){return o.apply(this,arguments)}),i=n(5),c=function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}(i),l=n(450),u=n(73);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var a=t[o](r),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}var s=function(){function Auth(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Auth)}return r(Auth,null,[{"key":"appCheckAuth","value":function appCheckAuth(){return new Promise(function(e){var t,n=this,o=c.default.$store.getState();Auth.checkAuth()&&!o.app.appOnLaunch?e(!0):(0,i.checkSession)().then(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(Auth.checkAuth()){t.next=7;break}return t.next=3,a();case 3:t.sent?(c.default.$store.dispatch((0,l.changeAppOnLaunch)()),e(!0)):(0,i.showToast)({"title":"获取授权信息失败","icon":"none","mask":!0}),t.next=9;break;case 7:c.default.$store.dispatch((0,l.changeAppOnLaunch)()),e(!0);case 9:case"end":return t.stop()}},_callee,n)}))).catch((t=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(t){return regeneratorRuntime.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return u.Lg.e(t),n.next=3,a();case 3:n.sent?(c.default.$store.dispatch((0,l.changeAppOnLaunch)()),e(!0)):(0,i.showToast)({"title":"获取授权信息失败","icon":"none","mask":!0});case 5:case"end":return n.stop()}},_callee2,n)})),function(e){return t.apply(this,arguments)}))})}},{"key":"checkAuth","value":function checkAuth(){var e=c.default.$store.getState().authorize||(0,i.getStorageSync)("authorize")||{},t=0,n=~~(Date.now()/1e3);return e.exp&&(t=e.exp),t-n>300}},{"key":"getToken","value":function getToken(){return(c.default.$store.getState().authorize||(0,i.getStorageSync)("authorize")).token}}]),Auth}();function saveAuthToken(e){c.default.$store.dispatch((0,l.insertToken)(e)),(0,i.setStorageSync)("authorize",e)}t.default=s},"450":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0}),t.insertToken=t.changeAppOnLaunch=void 0;var o=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(451));t.changeAppOnLaunch=function changeAppOnLaunch(){return{"type":o.CHANGE_APP_ON_LAUNCH}},t.insertToken=function insertToken(e){return{"type":o.INSERT_AUTHORIZE,"authorize":e}}},"451":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});t.CHANGE_APP_ON_LAUNCH="change_app_on_launch",t.INSERT_AUTHORIZE="insert_authorize"},"452":function(e,t,n){}}]);